{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { memo, useLayoutEffect, useState } from 'react';\nimport useMergeValue from 'use-merge-value';\nimport { ThemeModeContext } from \"../../context\";\nimport { matchBrowserPrefers } from \"../../utils/matchBrowserPrefers\";\nimport { safeStartTransition } from \"../../utils/safeStartTransition\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar darkThemeMatch;\nvar ThemeObserver = function ThemeObserver(_ref) {\n  var themeMode = _ref.themeMode,\n    setAppearance = _ref.setAppearance,\n    setBrowserPrefers = _ref.setBrowserPrefers;\n  var matchBrowserTheme = function matchBrowserTheme() {\n    safeStartTransition(function () {\n      if (matchBrowserPrefers('dark').matches) {\n        setAppearance('dark');\n      } else {\n        setAppearance('light');\n      }\n    });\n  };\n  var updateBrowserTheme = function updateBrowserTheme() {\n    safeStartTransition(function () {\n      if (matchBrowserPrefers('dark').matches) {\n        setBrowserPrefers('dark');\n      } else {\n        setBrowserPrefers('light');\n      }\n    });\n  };\n\n  // 自动监听系统主题变更\n  useLayoutEffect(function () {\n    // 如果不是自动，就明确设定亮暗色\n    if (themeMode !== 'auto') {\n      safeStartTransition(function () {\n        setAppearance(themeMode);\n      });\n      return;\n    }\n    // 如果是自动的话，则去做一次匹配，并开始监听\n    setTimeout(matchBrowserTheme, 1);\n    if (!darkThemeMatch) {\n      darkThemeMatch = matchBrowserPrefers('dark');\n    }\n    darkThemeMatch.addEventListener('change', matchBrowserTheme);\n    return function () {\n      darkThemeMatch.removeEventListener('change', matchBrowserTheme);\n    };\n  }, [themeMode]);\n  useLayoutEffect(function () {\n    if (!darkThemeMatch) {\n      darkThemeMatch = matchBrowserPrefers('dark');\n    }\n    darkThemeMatch.addEventListener('change', updateBrowserTheme);\n    return function () {\n      darkThemeMatch.removeEventListener('change', updateBrowserTheme);\n    };\n  }, []);\n  return null;\n};\nvar ThemeSwitcher = /*#__PURE__*/memo(function (_ref2) {\n  var _matchBrowserPrefers;\n  var children = _ref2.children,\n    appearanceProp = _ref2.appearance,\n    defaultAppearance = _ref2.defaultAppearance,\n    onAppearanceChange = _ref2.onAppearanceChange,\n    themeModeProps = _ref2.themeMode,\n    defaultThemeMode = _ref2.defaultThemeMode,\n    onThemeModeChange = _ref2.onThemeModeChange,\n    useTheme = _ref2.useTheme;\n  var _useTheme = useTheme(),\n    upperAppearance = _useTheme.appearance,\n    upperThemeMode = _useTheme.themeMode;\n  var _useMergeValue = useMergeValue('light', {\n      value: themeModeProps,\n      defaultValue: defaultThemeMode !== null && defaultThemeMode !== void 0 ? defaultThemeMode : upperThemeMode,\n      onChange: function onChange(v) {\n        return onThemeModeChange === null || onThemeModeChange === void 0 ? void 0 : onThemeModeChange(v);\n      }\n    }),\n    _useMergeValue2 = _slicedToArray(_useMergeValue, 2),\n    themeMode = _useMergeValue2[0],\n    setThemeMode = _useMergeValue2[1];\n  var _useMergeValue3 = useMergeValue('light', {\n      value: appearanceProp,\n      defaultValue: defaultAppearance !== null && defaultAppearance !== void 0 ? defaultAppearance : upperAppearance,\n      onChange: function onChange(v) {\n        return onAppearanceChange === null || onAppearanceChange === void 0 ? void 0 : onAppearanceChange(v);\n      }\n    }),\n    _useMergeValue4 = _slicedToArray(_useMergeValue3, 2),\n    appearance = _useMergeValue4[0],\n    setAppearance = _useMergeValue4[1];\n  var _useState = useState((_matchBrowserPrefers = matchBrowserPrefers('dark')) !== null && _matchBrowserPrefers !== void 0 && _matchBrowserPrefers.matches ? 'dark' : 'light'),\n    _useState2 = _slicedToArray(_useState, 2),\n    browserPrefers = _useState2[0],\n    setBrowserPrefers = _useState2[1];\n  return /*#__PURE__*/_jsxs(ThemeModeContext.Provider, {\n    value: {\n      themeMode: themeMode,\n      setThemeMode: setThemeMode,\n      appearance: appearance,\n      setAppearance: setAppearance,\n      isDarkMode: appearance === 'dark',\n      browserPrefers: browserPrefers\n    },\n    children: [\n    // Wait until after client-side hydration to show\n    typeof window !== 'undefined' && /*#__PURE__*/_jsx(ThemeObserver, {\n      themeMode: themeMode,\n      setAppearance: setAppearance,\n      setBrowserPrefers: setBrowserPrefers\n    }), children]\n  });\n});\nThemeSwitcher.displayName = 'ThemeSwitcher';\nexport default ThemeSwitcher;","map":{"version":3,"names":["_slicedToArray","memo","useLayoutEffect","useState","useMergeValue","ThemeModeContext","matchBrowserPrefers","safeStartTransition","jsx","_jsx","jsxs","_jsxs","darkThemeMatch","ThemeObserver","_ref","themeMode","setAppearance","setBrowserPrefers","matchBrowserTheme","matches","updateBrowserTheme","setTimeout","addEventListener","removeEventListener","ThemeSwitcher","_ref2","_matchBrowserPrefers","children","appearanceProp","appearance","defaultAppearance","onAppearanceChange","themeModeProps","defaultThemeMode","onThemeModeChange","useTheme","_useTheme","upperAppearance","upperThemeMode","_useMergeValue","value","defaultValue","onChange","v","_useMergeValue2","setThemeMode","_useMergeValue3","_useMergeValue4","_useState","_useState2","browserPrefers","Provider","isDarkMode","window","displayName"],"sources":["D:/HTML_Tutorial/MERN_Project/bookmyshow_clone/node_modules/antd-style/es/factories/createThemeProvider/ThemeSwitcher.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { memo, useLayoutEffect, useState } from 'react';\nimport useMergeValue from 'use-merge-value';\nimport { ThemeModeContext } from \"../../context\";\nimport { matchBrowserPrefers } from \"../../utils/matchBrowserPrefers\";\nimport { safeStartTransition } from \"../../utils/safeStartTransition\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar darkThemeMatch;\nvar ThemeObserver = function ThemeObserver(_ref) {\n  var themeMode = _ref.themeMode,\n    setAppearance = _ref.setAppearance,\n    setBrowserPrefers = _ref.setBrowserPrefers;\n  var matchBrowserTheme = function matchBrowserTheme() {\n    safeStartTransition(function () {\n      if (matchBrowserPrefers('dark').matches) {\n        setAppearance('dark');\n      } else {\n        setAppearance('light');\n      }\n    });\n  };\n  var updateBrowserTheme = function updateBrowserTheme() {\n    safeStartTransition(function () {\n      if (matchBrowserPrefers('dark').matches) {\n        setBrowserPrefers('dark');\n      } else {\n        setBrowserPrefers('light');\n      }\n    });\n  };\n\n  // 自动监听系统主题变更\n  useLayoutEffect(function () {\n    // 如果不是自动，就明确设定亮暗色\n    if (themeMode !== 'auto') {\n      safeStartTransition(function () {\n        setAppearance(themeMode);\n      });\n      return;\n    }\n    // 如果是自动的话，则去做一次匹配，并开始监听\n    setTimeout(matchBrowserTheme, 1);\n    if (!darkThemeMatch) {\n      darkThemeMatch = matchBrowserPrefers('dark');\n    }\n    darkThemeMatch.addEventListener('change', matchBrowserTheme);\n    return function () {\n      darkThemeMatch.removeEventListener('change', matchBrowserTheme);\n    };\n  }, [themeMode]);\n  useLayoutEffect(function () {\n    if (!darkThemeMatch) {\n      darkThemeMatch = matchBrowserPrefers('dark');\n    }\n    darkThemeMatch.addEventListener('change', updateBrowserTheme);\n    return function () {\n      darkThemeMatch.removeEventListener('change', updateBrowserTheme);\n    };\n  }, []);\n  return null;\n};\nvar ThemeSwitcher = /*#__PURE__*/memo(function (_ref2) {\n  var _matchBrowserPrefers;\n  var children = _ref2.children,\n    appearanceProp = _ref2.appearance,\n    defaultAppearance = _ref2.defaultAppearance,\n    onAppearanceChange = _ref2.onAppearanceChange,\n    themeModeProps = _ref2.themeMode,\n    defaultThemeMode = _ref2.defaultThemeMode,\n    onThemeModeChange = _ref2.onThemeModeChange,\n    useTheme = _ref2.useTheme;\n  var _useTheme = useTheme(),\n    upperAppearance = _useTheme.appearance,\n    upperThemeMode = _useTheme.themeMode;\n  var _useMergeValue = useMergeValue('light', {\n      value: themeModeProps,\n      defaultValue: defaultThemeMode !== null && defaultThemeMode !== void 0 ? defaultThemeMode : upperThemeMode,\n      onChange: function onChange(v) {\n        return onThemeModeChange === null || onThemeModeChange === void 0 ? void 0 : onThemeModeChange(v);\n      }\n    }),\n    _useMergeValue2 = _slicedToArray(_useMergeValue, 2),\n    themeMode = _useMergeValue2[0],\n    setThemeMode = _useMergeValue2[1];\n  var _useMergeValue3 = useMergeValue('light', {\n      value: appearanceProp,\n      defaultValue: defaultAppearance !== null && defaultAppearance !== void 0 ? defaultAppearance : upperAppearance,\n      onChange: function onChange(v) {\n        return onAppearanceChange === null || onAppearanceChange === void 0 ? void 0 : onAppearanceChange(v);\n      }\n    }),\n    _useMergeValue4 = _slicedToArray(_useMergeValue3, 2),\n    appearance = _useMergeValue4[0],\n    setAppearance = _useMergeValue4[1];\n  var _useState = useState((_matchBrowserPrefers = matchBrowserPrefers('dark')) !== null && _matchBrowserPrefers !== void 0 && _matchBrowserPrefers.matches ? 'dark' : 'light'),\n    _useState2 = _slicedToArray(_useState, 2),\n    browserPrefers = _useState2[0],\n    setBrowserPrefers = _useState2[1];\n  return /*#__PURE__*/_jsxs(ThemeModeContext.Provider, {\n    value: {\n      themeMode: themeMode,\n      setThemeMode: setThemeMode,\n      appearance: appearance,\n      setAppearance: setAppearance,\n      isDarkMode: appearance === 'dark',\n      browserPrefers: browserPrefers\n    },\n    children: [\n    // Wait until after client-side hydration to show\n    typeof window !== 'undefined' && /*#__PURE__*/_jsx(ThemeObserver, {\n      themeMode: themeMode,\n      setAppearance: setAppearance,\n      setBrowserPrefers: setBrowserPrefers\n    }), children]\n  });\n});\nThemeSwitcher.displayName = 'ThemeSwitcher';\nexport default ThemeSwitcher;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}